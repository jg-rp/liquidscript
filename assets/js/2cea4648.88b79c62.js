"use strict";(self.webpackChunkliquidscript_docs=self.webpackChunkliquidscript_docs||[]).push([[30098],{43354:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var d=i(74848),r=i(28453);const t={},s="Undefined",c={id:"introduction/undefined",title:"Undefined",description:'LiquidScript does not have a "lax" mode like some Liquid engines, but we can control what happens if a template author attempts to use an undefined variable or filter.',source:"@site/docs/introduction/undefined.md",sourceDirName:"introduction",slug:"/introduction/undefined",permalink:"/liquidscript/introduction/undefined",draft:!1,unlisted:!1,editUrl:"https://github.com/jg-rp/liquidscript/tree/docs/docs/introduction/undefined.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Objects and Drops",permalink:"/liquidscript/introduction/objects-and-drops"},next:{title:"HTML Auto-Escape",permalink:"/liquidscript/introduction/auto-escape"}},o={},l=[{value:"Undefined Variables",id:"undefined-variables",level:2},{value:"Default Undefined",id:"default-undefined",level:3},{value:"Strict Undefined",id:"strict-undefined",level:3},{value:"Falsy Undefined",id:"falsy-undefined",level:3},{value:"Undefined Filters",id:"undefined-filters",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"undefined",children:"Undefined"}),"\n",(0,d.jsx)(n.p,{children:'LiquidScript does not have a "lax" mode like some Liquid engines, but we can control what happens if a template author attempts to use an undefined variable or filter.'}),"\n",(0,d.jsx)(n.h2,{id:"undefined-variables",children:"Undefined Variables"}),"\n",(0,d.jsxs)(n.p,{children:["When rendering a Liquid template, if a variable name can not be resolved, an instance of ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/Undefined",children:(0,d.jsx)(n.code,{children:"Undefined"})})," is used instead. We can customize template rendering behavior by supplying an ",(0,d.jsx)(n.code,{children:"Undefined"})," factory function to the ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/Environment",children:(0,d.jsx)(n.code,{children:"Environment"})})," constructor or ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/Template#fromstring",children:(0,d.jsx)(n.code,{children:"Template.fromString()"})}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment, StrictUndefined } from "liquidsscript";\n\nconst env = new Environment({ undefinedFactory: StrictUndefined.from });\nenv.fromString("{{ nosuchthing }}").renderSync();\n// LiquidUndefinedError: \'nosuchthing\' is undefined (<string>:1)\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Built-in ",(0,d.jsx)(n.code,{children:"Undefined"})," types are ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/LaxUndefined",children:(0,d.jsx)(n.code,{children:"LaxUndefined"})})," (the default), ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/StrictUndefined",children:(0,d.jsx)(n.code,{children:"StrictUndefined"})})," and ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/FalsyStrictUndefined",children:(0,d.jsx)(n.code,{children:"FalsyStrictUndefined"})}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"default-undefined",children:"Default Undefined"}),"\n",(0,d.jsxs)(n.p,{children:["All operations on the default ",(0,d.jsx)(n.code,{children:"Undefined"})," type are silently ignored and, when rendered, it produces an empty string. For example, you can access properties and iterate an undefined variable without error."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-liquid",metastring:'title="template"',children:"Hello {{ nosuchthing }}\n{% for thing in nosuchthing %}\n    {{ thing }}\n{% endfor %}\n"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-plain",metastring:'title="output"',children:"Hello\n\n\n\n"})}),"\n",(0,d.jsx)(n.h3,{id:"strict-undefined",children:"Strict Undefined"}),"\n",(0,d.jsxs)(n.p,{children:["Given ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/StrictUndefined#from",children:(0,d.jsx)(n.code,{children:"StrictUndefined.from"})})," as the ",(0,d.jsx)(n.code,{children:"undefinedFactory"})," option to an environment or ",(0,d.jsx)(n.code,{children:"Template.fromString()"}),", any operation on an undefined variable will raise a ",(0,d.jsx)(n.code,{children:"LiquidUndefinedError"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment, StrictUndefined } from "liquidscript";\n\nconst env = new Environment({ undefinedFactory: StrictUndefined.from });\nenv.fromString("{{ nosuchthing }}").renderSync();\n// LiquidUndefinedError: \'nosuchthing\' is undefined (<string>:1)\n'})}),"\n",(0,d.jsxs)(n.p,{children:['Note that the "standard" ',(0,d.jsx)(n.code,{children:"default"})," filter does not handle undefined values the ",(0,d.jsx)(n.a,{href:"https://github.com/Shopify/liquid/issues/1404",children:"way you might expect"}),". The following example will raise a ",(0,d.jsx)(n.code,{children:"LiquidUndefinedError"})," if username is undefined."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-liquid",children:'Hello {{ username | default: "user" }}\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Similarly, standard ",(0,d.jsx)(n.code,{children:"{% if %}"})," expressions do not allow you to detect undefined values. See ",(0,d.jsx)(n.a,{href:"https://github.com/Shopify/liquid/issues/1034",children:"Shopify Liquid issue #1034"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment, StrictUndefined } from "liquidscript";\n\nconst env = new Environment({ undefinedFactory: StrictUndefined.from });\nenv\n  .fromString("{% if nosuchthing %}true{% else %}false{% endif %}")\n  .renderSync();\n// LiquidUndefinedError: \'nosuchthing\' is undefined (<string>:1)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"falsy-undefined",children:"Falsy Undefined"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/FalsyStrictUndefined",children:(0,d.jsx)(n.code,{children:"FalsyStrictUndefined"})})," addresses the issues with ",(0,d.jsx)(n.code,{children:"StrictUndefined"})," described above. Given ",(0,d.jsx)(n.a,{href:"/liquidscript/api/classes/FalsyStrictUndefined#from",children:(0,d.jsx)(n.code,{children:"FalsyStrictUndefined.from"})})," as the ",(0,d.jsx)(n.code,{children:"undefinedFactory"})," option to an environment or ",(0,d.jsx)(n.code,{children:"Template.fromString()"}),", undefined values can be tested for truthiness and compared to other values in an ",(0,d.jsx)(n.code,{children:"if"}),"/",(0,d.jsx)(n.code,{children:"unless"})," expression without throwing an error. An ",(0,d.jsx)(n.code,{children:"UndefinedError"})," will be thrown when an undefined value is iterated, output or when accessing its properties."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment, FalsyStrictUndefined } from "liquidscript";\n\nconst env = new Environment({ undefinedFactory: FalsyStrictUndefined.from });\n\nenv\n  .fromString("{% if nosuchthing %}true{% else %}false{% endif %}")\n  .renderSync();\n// false\n\nenv.fromString("{{ nosuchthing | default: \'hello\' }}").renderSync();\n// hello\n\nenv.fromString("{{ nosuchthing }}").renderSync();\n// LiquidUndefinedError: \'nosuchthing\' is undefined (<string>:1)\n'})}),"\n",(0,d.jsx)(n.h2,{id:"undefined-filters",children:"Undefined Filters"}),"\n",(0,d.jsxs)(n.p,{children:["By default, attempts to use an undefined filter will raise a ",(0,d.jsx)(n.code,{children:"NoSuchFilterError"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment } from "liquidscript";\n\nconst env = new Environment();\nenv.fromString("{{ \'hello\' | camel_case }}").renderSync();\n// NoSuchFilterError: unknown filter camel_case (<string>:1)\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Set the ",(0,d.jsx)(n.code,{children:"strictFilters"})," option on the ",(0,d.jsx)(n.code,{children:"Environment"})," constructor or ",(0,d.jsx)(n.code,{children:"Template.fromString"})," to ",(0,d.jsx)(n.code,{children:"false"}),", and undefined filters will be silently ignored."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'import { Environment } from "liquidscript";\n\nconst env = new Environment({ strictFilters: false });\nconsole.log(env.fromString("{{ \'hello\' | camel_case }}").renderSync());\n// hello\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var d=i(96540);const r={},t=d.createContext(r);function s(e){const n=d.useContext(t);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),d.createElement(t.Provider,{value:n},e.children)}}}]);